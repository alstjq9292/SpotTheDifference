<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>디즈니 틀린그림 찾기 Step3</title>
<link rel="stylesheet" type="text/css" href="css/global.css" media="screen" />
<style>
#wrap .frame img.pointLight {position:absolute; top:0px; left:0px; z-index:100}
#wrap .frame img.pointOlaf {position:absolute; top:0px; left:0px; z-index:100}
#wrap .frame img.pointReflex {position:absolute; top:0px; left:0px; z-index:100}
#wrap .frame img.pointArms {position:absolute; top:0px; left:0px; z-index:100}
#wrap .frame img.pointBack {position:absolute; top:0px; left:0px; z-index:100}
#wrap .frame img.stopCurtain {position:absolute; top:0px; left:0px; z-index:100}
</style>
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/game.js" type="javascript"></script>
<script>
  /* Time Prograss Bar */
	var setId;
	var width = 1;
		/* Play */
	function move() {
	    var elem = document.getElementById("myBar"); 
	    
	    setId = setInterval(frame, 100);
	    
	    function frame() {
	        if (width < 100) {
	        	 width++; 
		         elem.style.width = width + '%';
		         
	            
	        } else if(width >= 100) {
	        	clearInterval(setId);
	            alert("Time out!!!");
                location.href='index.html';
	        }
	    }
	    $('.stopCurtain').css("z-index", "10000");
	    $('.stopCurtain').fadeOut();
	}
		/* Stop */
	function stop(){
		clearInterval(setId);
		$('.stopCurtain').fadeIn();
	    $('.stopCurtain').css("display", "block"); 
	    $('.stopCurtain').css("z-index", "20000");
	}
		
	//힌트 
	function hintA() {
		if (hint >= 1) {
			if (answerChk[0] == null) {
				answerChk[0] = true;
				answerCnt++;
				$('.pointLight').fadeIn();
				$('.pointLight').css("display", "block");
				$('.pointLight').css("z-index", "10000");
				$('.score').html(answerCnt);
				if (answerCnt == maxAnswer) {
					setTimeout(function() {
						alert('스테이지 클리어!!');
						location.href = 'step04.html';
					}, 500);
				}
				isAnswer = true;
				--hint;
				$('.hintNum').html(hint);
			} else if (answerChk[1] == null) {
				answerChk[1] = true;
				answerCnt++;
				$('.pointOlaf').fadeIn();
				$('.pointOlaf').css("display", "block");
				$('.pointOlaf').css("z-index", "10000");
				$('.score').html(answerCnt);
				if (answerCnt == maxAnswer) {
					setTimeout(function() {
						alert('스테이지 클리어!!');
						location.href = 'step04.html';
					}, 500);
				}
				isAnswer = true;
				--hint;
				$('.hintNum').html(hint);
			} else if (answerChk[2] == null) {
				answerChk[2] = true;
				answerCnt++;
				$('.pointReflex').fadeIn();
				$('.pointReflex').css("display", "block");
				$('.pointReflex').css("z-index", "10000");
				$('.score').html(answerCnt);
				if (answerCnt == maxAnswer) {
					setTimeout(function() {
						alert('스테이지 클리어!!');
						location.href = 'step04.html';
					}, 500);
				}
				isAnswer = true;
				--hint;
				$('.hintNum').html(hint);
			}
			else if (answerChk[3] == null) {
				answerChk[3] = true;
				answerCnt++;
				$('.pointArms').fadeIn();
				$('.pointArms').css("display", "block");
				$('.pointArms').css("z-index", "10000");
				$('.score').html(answerCnt);
				if (answerCnt == maxAnswer) {
					setTimeout(function() {
						alert('스테이지 클리어!!');
						location.href = 'step04.html';
					}, 500);
				}
				isAnswer = true;
				--hint;
				$('.hintNum').html(hint);
			}
			else if (answerChk[4] == null) {
				answerChk[4] = true;
				answerCnt++;
				$('.pointBack').fadeIn();
				$('.pointBack').css("display", "block");
				$('.pointBack').css("z-index", "10000");
				$('.score').html(answerCnt);
				if (answerCnt == maxAnswer) {
					setTimeout(function() {
						alert('스테이지 클리어!!');
						location.href = 'step04.html';
					}, 500);
				}
				isAnswer = true;
				--hint;
				$('.hintNum').html(hint);
			}
		}

	}	
   /* 변 수 선 언  */
   //var time = 0; // 제한시간 변수 생성
   var hint = 1; // 힌트  상수 생성 1로 고정
   var answerCnt = 0; // 정답 수를 체크하기 위한 변수
   var answerChk = new Array(); // 이미 맞춘것과 안맞춘것을 구분하기 위한 boolean값 배열(이걸 활용해서 힌트를 줄 예정)
   const maxAnswer = 5;
   /*
      2차배열 선언 예시
      answerStage01[0][0] = 30; // x축 왼쪽
      answerStage01[0][1] = 60; // x축 오른쪽
      answerStage01[0][2] = 30; // y축 아래쪽
      answerStage01[0][3] = 60; // y축 위쪽
   */
   var clickX = 0;
   var clickY = 0;
   
   var isAnswer = false;
   
 $(function(){ //----좌표값찾기----- 
   var area = $('.frame');
   area.click(function (event) {
      x = clickX = event.offsetX;
      y = clickY = event.offsetY;
      clickChk();
    //alert('x좌표:' + x + ', y좌표:' + y);
   });
       });
    
    
   var clickLight = function(){
    //alert("반짝임!!");
    answerChk[0] = true;
    answerCnt++;
    $('.pointLight').fadeIn();
    $('.pointLight').css("display", "block"); 
    $('.pointLight').css("z-index", "10000");
    $('.score').html(answerCnt);
    if(answerCnt == maxAnswer){
       	setTimeout(function() {
        alert('스테이지 클리어!!');
      	location.href='step04.html';
       	  }, 500);     
   }
       isAnswer = true;   
   }
   var clickOlaf = function(){
    //alert("올라프!!");
    answerChk[1] = true;
    answerCnt++;
    $('.pointOlaf').fadeIn();
    $('.pointOlaf').css("display", "block"); 
    $('.pointOlaf').css("z-index", "10000");
    $('.score').html(answerCnt);
    if(answerCnt == maxAnswer){
       	setTimeout(function() {
        alert('스테이지 클리어!!');
      	location.href='step04.html';
       	  }, 500);     
   }
       isAnswer = true;   
   }
   var clickReflex = function(){
    //alert("반사!!");
    answerChk[2] = true;
    answerCnt++;
    $('.pointReflex').fadeIn();
    $('.pointReflex').css("display", "block"); 
    $('.pointReflex').css("z-index", "10000");
    $('.score').html(answerCnt);
    if(answerCnt == maxAnswer){
       	setTimeout(function() {
        alert('스테이지 클리어!!');
      	location.href='step04.html';
       	  }, 500);     
   }
       isAnswer = true;   
   }
   var clickArms = function(){
    //alert("팔!!");
    answerChk[3] = true;
    answerCnt++;
    $('.pointArms').fadeIn();
    $('.pointArms').css("display", "block"); 
    $('.pointArms').css("z-index", "10000");
    $('.score').html(answerCnt);
    if(answerCnt == maxAnswer){
       	setTimeout(function() {
        alert('스테이지 클리어!!');
      	location.href='step04.html';
       	  }, 500);     
   }
       isAnswer = true;
   }
   var clickBack = function(){
    //alert("뒤에!!");
    answerChk[4] = true;
    answerCnt++;
    $('.pointBack').fadeIn();
    $('.pointBack').css("display", "block"); 
    $('.pointBack').css("z-index", "10000");
    $('.score').html(answerCnt);
    if(answerCnt == maxAnswer){
       	setTimeout(function() {
        alert('스테이지 클리어!!');
      	location.href='step04.html';
       	  }, 500);     
   }
       isAnswer = true;
   }
   var clickChk = function(){
    if(!isAnswer){
    //console.log(clickX);
    //console.log(clickY);
    $(".frame").append("<img class='point' style='display:block; top:" + (clickY-25) + "px; left:" + (clickX-25) + "px; 'src='images/ui/img_bad.png'>")
    $('.point').css("z-index", "10000");
    $('.point').fadeOut(); 
    }
      isAnswer = false;
   };
</script>
</head>
<body onload="move();">

<!-- Wrap -->
<div id="wrap">
	<!-- Frame -->
	<div class="frame">
	<a href="#">
    <img class="step_img" src="images/step/img_step03.jpg" alt="세번째 스텝" usemap="#a1">
    <map id="a1" name="a1">
      <area shape="rect" coords="158,92,204,139" alt="반짝임"
      onclick="clickLight()">
      <area shape="rect" coords="61,122,86,186" alt="올라프" 
      onclick="clickOlaf()">
      <area shape="rect" coords="55,7,108,60" alt="반사" 
      onclick="clickReflex()">
      <area shape="rect" coords="161,243,299,284" alt="팔" 
      onclick="clickArms()">
      <area shape="rect" coords="219,27,271,53" alt="뒤에" 
      onclick="clickBack()">
      
      <area shape="rect" coords="491,105,554,171" alt="반짝임"
      onclick="clickLight()">
      <area shape="rect" coords="394,140,455,222" alt="올라프" 
      onclick="clickOlaf()">
      <area shape="rect" coords="355,3,452,82" alt="반사" 
      onclick="clickReflex()">
      <area shape="rect" coords="486,234,627,283" alt="팔" 
      onclick="clickArms()">
      <area shape="rect" coords="535,26,602,57" alt="뒤에" 
      onclick="clickBack()">
    </map>
    </a>
<!--      정답표시좌표    -->
      <img class="pointLight" style="display:none; top:100px; left:480px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointLight" style="display:none; top:100px; left:160px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointOlaf" style="display:none; top:134px; left:380px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointOlaf" style="display:none; top:134px; left:60px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointReflex" style="display:none; top:10px; left:370px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointReflex" style="display:none; top:10px; left:40px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointArms" style="display:none; top:240px; left:490px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointArms" style="display:none; top:240px; left:170px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointBack" style="display:none; top:22px; left:540px;" src="images/ui/img_good.png" alt="good"/>
      <img class="pointBack" style="display:none; top:22px; left:210px;" src="images/ui/img_good.png" alt="good"/>		
	  
	  <!-- 일시정지 -->
  <img class="stopCurtain" style="display:none; top:0px; left:0px;" src="images/ui/stop_curtain.png" alt="stop_curtain"/>
	</div>
	<hr />
	<!--// Frame -->
	<!-- Ui Area -->
	<div class="ui_area">		
		<!-- Time Line -->
		<div class="time_line">
		   <p id="myBar" class="gauge"></p>
		</div>
		<hr />
		<!--// Time Line -->
		
		<!-- Stop Pause -->
      <div class="btn_control">
         <button class="stop" type="button" onclick="stop()">정지</button>
         <button class="play" type="button" onclick="move()">플레이</button>
      </div>
      <hr />
      <!--//Stop Pause  -->
		<!-- Score State -->
		<div class="score_state">
			<span class="score">0</span><span>5</span>
		</div>
		<hr />
		<!--// Score State -->
		<!-- Hint -->
		<div class="hint">
			<a href="#hint" onclick="hintA()"><span>Hint</span><span class="hintNum">1</span></a>
		</div>
		<!--// Hint -->
	</div>
	<hr />
	<!--// Ui Area -->
</div>
<!--// Wrap -->

</body>
</html>